# smbc-card-report-formatter

三井住友VISAカードのWEB明細書のCSVを`日付,内容,支払金額`のみのCSVに変換するスクリプト。
実行すると`smbc_visa_`のプレフィックスが付与されたCSVが実行ディレクトリに保存されます。

## Details

WEB明細CSVは下記のような形で構成されています。
```csv
〇〇　〇〇　様,4980-00**-****-****,〇〇カード
2024/05/01,セブン－イレブン,100,１,１,100,
2024/05/02,ＥＴＣ　関東支社,500,１,１,500,自XX　至XX　　普通車
,,,,,600
□□　□□　様,4980-00**-****-****,〇〇カード
2024/05/10,セブン－イレブン,1000,１,１,1000,
,,,,,1000
,,,,,1600,
```
1-4行目は本人、5-7行目は家族カード、8行目が総額です。
2,3,6行目の各列は、Web上では`ご利用日,ご利用店名,ご利用金額,支払区分,今回回数,お支払い金額,(お支払い総額)(内手数料)`で表現されています。

本スクリプトでは、特に誰が利用したかは含めず明細部分のみを抽出、整形します。そのため上記の場合は、2,3,6行目を抽出します。
また、支払区分や今回回数は不要なため削除し、一番右の`(お支払い総額)(内手数料)`の列の値は`ご利用店名`の値と繋げて出力します。

最終的に出力されるCSVは下記のような形になります。
```csv
2024/05/01,セブン－イレブン,100
2024/05/02,ＥＴＣ　関東支社 (自XX　至XX　　普通車),500
2024/05/10,セブン－イレブン,1000
```

## How to execute

```console
# 202405.csvはダウンロードしたWEB明細書のCSV
python main.py 202405.csv
```
